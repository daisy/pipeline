<!DOCTYPE html>
<html lang="en">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta charset="utf-8">
    <meta http-equiv="content-language" content="en">
    <title>Webservicecreatejob</title>
    
  <meta prefix="dc: http://purl.org/dc/elements/1.1/" property="dc:title" content="Webservicecreatejob">


    <link rel="stylesheet" href="/pipeline/css/default.css">
    <link rel="stylesheet" href="/pipeline/css/wiki.css">
    <link rel="stylesheet" href="/pipeline/css/coderay.css">
    <link rel="shortcut icon" href="http://www.daisy.org/sites/default/files/favicon_0.ico">

  </head>
  <body>
    <div id="body">
      <nav id="nav-sitemap">
  
  <ul class="spine">
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline" tabindex="1">
      
      Home
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/Download.html" tabindex="2">
      
      Download
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      <a href="/pipeline/Get-Help" tabindex="3">
      Help
      </a>
      
      <ul class="spine">
  
    
      
        <li class="spine-item">
      
      <a href="/pipeline/Get-Help/User-Guide" tabindex="6">
      User Guide
      </a>
      
      <ul class="spine">
  
    
      
        <li class="spine-item">
      
      <a href="/pipeline/Get-Help/User-Guide/Installation" tabindex="7">
      Installation
      </a>
      
      <ul class="spine">
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/Get-Help/User-Guide/Web-Application/Installation-and-configuation" tabindex="8">
      
      Web Application
      </a>
    
    </li>
  
</ul>

    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/Get-Help/User-Guide/Desktop-Application/Quick-Start-Guide" tabindex="9">
      
      Desktop Application
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      <a href="/pipeline/Get-Help/User-Guide/Web-Application/User-Guide" tabindex="10">
      Web Application
      </a>
      
      <ul class="spine">
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/Get-Help/User-Guide/Web-Application/Templating" tabindex="11">
      
      Templating
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/Get-Help/User-Guide/Web-Application/Administrator-settings" tabindex="12">
      
      Administrator Settings
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/Get-Help/User-Guide/Web-Application/Branding" tabindex="13">
      
      Branding
      </a>
    
    </li>
  
</ul>

    
    </li>
  
    
      
        <li class="spine-item">
      
      <a href="/pipeline/Get-Help/User-Guide/Pipeline-as-Service" tabindex="14">
      Pipeline as a Service
      </a>
      
      <ul class="spine">
  
    
      
        <li class="spine-item">
      
      <a href="/pipeline/Configuration-Files" tabindex="15">
      Configuration Files
      </a>
      
      <ul class="spine">
  
    
      
        <li class="spine-item">
      
      
        <a href="https://daisy.github.io/pipeline/modules/tts-common/doc/tts-config.html" class="external-link" target="_blank" tabindex="16">
      
      Text-To-Speech Configuration
      </a>
    
    </li>
  
</ul>

    
    </li>
  
</ul>

    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/Get-Help/User-Guide/Command-Line" tabindex="17">
      
      Command Line
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      <a href="/pipeline/Get-Help/User-Guide/Scripts" tabindex="18">
      Scripts
      </a>
      
      <ul class="spine">
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/daisy202-validator/doc" tabindex="19">
      
      DAISY 2.02 Validator
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/daisy202-to-epub3/doc" tabindex="20">
      
      DAISY 2.02 to EPUB 3
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/daisy3-to-daisy202/doc" tabindex="21">
      
      DAISY 3 to DAISY 2.02
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/daisy3-to-epub3/doc" tabindex="22">
      
      DAISY 3 to EPUB 3
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/dtbook-validator/doc" tabindex="23">
      
      DTBook Validator
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/dtbook-to-daisy3/doc" tabindex="24">
      
      DTBook to DAISY 3
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/dtbook-to-epub3/doc" tabindex="25">
      
      DTBook to EPUB3
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/dtbook-to-html/doc" tabindex="26">
      
      DTBook to HTML
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/dtbook-to-odt/doc" tabindex="27">
      
      DTBook to ODT
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/braille/dtbook-to-pef/doc" tabindex="28">
      
      DTBook to PEF
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/dtbook-to-rtf/doc" tabindex="29">
      
      DTBook to RTF
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/dtbook-to-zedai/doc" tabindex="30">
      
      DTBook to ZedAI
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/epub2-to-epub3/doc" tabindex="31">
      
      EPUB 2 to EPUB 3
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/epub3-to-epub3/doc" tabindex="32">
      
      EPUB 3 Enhancer
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/epub3-validator/doc" tabindex="33">
      
      EPUB 3 Validator
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/epub3-to-daisy202/doc" tabindex="34">
      
      EPUB 3 to DAISY 2.02
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/epub3-to-daisy3/doc" tabindex="35">
      
      EPUB 3 to DAISY 3
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/braille/epub3-to-pef/doc" tabindex="36">
      
      EPUB 3 to PEF
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/epub-to-daisy/doc" tabindex="37">
      
      EPUB to DAISY
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/html-to-dtbook/doc" tabindex="38">
      
      HTML to DTBook
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/html-to-epub3/doc" tabindex="39">
      
      HTML to EPUB3
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/braille/html-to-pef/doc" tabindex="40">
      
      HTML to PEF
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/nimas-fileset-validator/doc" tabindex="41">
      
      NIMAS Fileset Validator
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/zedai-to-epub3/doc" tabindex="42">
      
      ZedAI to EPUB 3
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/zedai-to-html/doc" tabindex="43">
      
      ZedAI to HTML
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/braille/zedai-to-pef/doc" tabindex="44">
      
      ZedAI to PEF
      </a>
    
    </li>
  
</ul>

    
    </li>
  
</ul>

    
    </li>
  
    
      
        <li class="spine-item">
      
      <a href="/pipeline/Get-Help/API-Documentation" tabindex="45">
      API Documentation
      </a>
      
      <ul class="spine">
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/WebServiceAPI" tabindex="46">
      
      Web Service API
      </a>
    
    </li>
  
</ul>

    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/Get-Help/Issue-Tracker.html" tabindex="47">
      
      Issue Tracker
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      <a href="/pipeline/Get-Help/Troubleshooting" tabindex="48">
      Troubleshooting
      </a>
      
      <ul class="spine">
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/Get-Help/Troubleshooting/Common-Errors-Windows" tabindex="49">
      
      Troubleshooting on Windows
      </a>
    
    </li>
  
</ul>

    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="https://github.com/daisy/pipeline/discussions" class="external-link" target="_blank" tabindex="50">
      
      Forum
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="mailto:daisy-pipeline@mail.daisy.org" tabindex="51">
      
      Contact
      </a>
    
    </li>
  
</ul>

    
    </li>
  
    
      
        <li class="spine-item">
      
      <a href="/pipeline/Contribute" tabindex="4">
      Contribute​
      </a>
      
      <ul class="spine">
  
    
      
        <li class="spine-item">
      
      
        <a href="https://github.com/daisy/pipeline" class="external-link" target="_blank" tabindex="52">
      
      Source Code
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="https://groups.google.com/forum/#!forum/daisy-pipeline-dev" class="external-link" target="_blank" tabindex="53">
      
      Developers Mailing List
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      <a href="/pipeline/Contribute/Developer-Guide" tabindex="54">
      Developer Guide
      </a>
      
      <ul class="spine">
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/Contribute/Developer-Guide/Sources" tabindex="55">
      
      Source Code
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/Contribute/Developer-Guide/Building" tabindex="56">
      
      Build System
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/Modules" tabindex="57">
      
      Writing Modules
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      <a href="/pipeline/Contribute/Developer-Guide/XProc" tabindex="58">
      XProc
      </a>
      
      <ul class="spine">
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/XProcExtensions" tabindex="59">
      
      XProc Extensions
      </a>
    
    </li>
  
</ul>

    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/Contribute/Developer-Guide/Testing" tabindex="60">
      
      Testing
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/Contribute/Developer-Guide/Debugging" tabindex="61">
      
      Debugging
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/Contribute/Developer-Guide/Releasing" tabindex="62">
      
      Release Management
      </a>
    
    </li>
  
</ul>

    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/Contribute/Easy-Hacks.html" tabindex="63">
      
      Easy Hacks
      </a>
    
    </li>
  
</ul>

    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="http://www.daisy.org" class="external-link" target="_blank" tabindex="5">
      
      DAISY Home
      </a>
    
    </li>
  
</ul>

</nav>



<script type="text/javascript">
var onload = function() {
  var nav = document.getElementById('nav-sitemap');
  var navTopBefore = nav.offsetTop;
  var fixed = (navTopBefore < window.pageYOffset);
  if (fixed) {
    nav.classList.add('fixed');
  }
  // FIXME: this is a hack! styling should not be handled here!
  var body = document.getElementsByTagName('body')[0];
  var leftNav = document.getElementById('nav-sitemap-left');
  var setLeftNavHeight = function() {
    if (fixed) {
      leftNav.style.height = (window.innerHeight - 34) + "px";
    } else {
      leftNav.style.height = Math.max(window.innerHeight - 219, body.offsetHeight - 175) + "px";
	  // "height: auto" doesn't work if the auto height of leftNav is greater
	  // than window.innerHeight and body.offsetHeight: it would mess up the
	  // transition because the transition would influence the pageYOffset
	  // and thereby canceling itself, making it impossible to scroll down.
    }
  }
  setLeftNavHeight();
  window.onscroll = function(e) {
    if (fixed && window.pageYOffset < navTopBefore) {
      nav.classList.remove('fixed');
	  fixed = false;
      setLeftNavHeight();
    } else if (!fixed && window.pageYOffset > navTopBefore) {
      nav.classList.add('fixed');
	  fixed = true;
      setLeftNavHeight();
    }
  }
  window.onresize = setLeftNavHeight;
};
if (window.addEventListener) {
  window.addEventListener('load', onload);
} else {
  window.attachEvent('onload', onload);
}
</script>


      <div class="edit-button">
  <a href="https://github.com/daisy/pipeline/wiki/WebServiceCreateJob/_edit" class="external-link" target="_blank">
    Edit this page on Github
  </a>
</div>

      <h1 id="web-service-job-creation">Web Service Job Creation</h1>

<p>There are two ways of creating jobs. Both involve first creating an
XML document to represent the job request:</p>

<div class="language-xml highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span class="tag">&lt;jobRequest</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">'</span><span class="content">http://www.daisy.org/ns/pipeline/data</span><span class="delimiter">'</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;script</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">'</span><span class="content">http://example.org/ws/scripts/dtbook-to-zedai</span><span class="delimiter">'</span></span><span class="tag">/&gt;</span>
<span class="inline">    <span class="tag">&lt;input</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">'</span><span class="content">source</span><span class="delimiter">'</span></span><span class="tag">&gt;</span>
        ...
    <span class="tag">&lt;/input&gt;</span>
    <span class="tag">&lt;option</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">'</span><span class="content">opt-mods-filename</span><span class="delimiter">'</span></span><span class="tag">&gt;</span>the-mods-file.xml<span class="tag">&lt;/option&gt;</span>
    <span class="tag">&lt;option</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">'</span><span class="content">opt-css-filename</span><span class="delimiter">'</span></span><span class="tag">&gt;</span>the-css-file.css<span class="tag">&lt;/option&gt;</span>
    <span class="tag">&lt;option</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">'</span><span class="content">opt-zedai-filename</span><span class="delimiter">'</span></span><span class="tag">&gt;</span>the-zedai-file.xml<span class="tag">&lt;/option&gt;</span>
    &lt;callback type=<span class="string"><span class="delimiter">'</span><span class="content">messages</span><span class="delimiter">'</span></span> href=<span class="string"><span class="delimiter">'</span><span class="content">http://example.org/ws/jobmessages</span><span class="delimiter">'</span></span> frequency=<span class="string"><span class="delimiter">'</span><span class="content">10</span><span class="delimiter">'</span></span>/&gt;
    &lt;callback type=<span class="string"><span class="delimiter">'</span><span class="content">status</span><span class="delimiter">'</span></span> href=<span class="string"><span class="delimiter">'</span><span class="content">http://example.org/ws/jobstatus</span><span class="delimiter">'</span></span> frequency=<span class="string"><span class="delimiter">'</span><span class="content">10</span><span class="delimiter">'</span></span>/&gt;
&lt;<span class="regexp"><span class="delimiter">/</span><span class="content">jobRequest&gt;
</span></span></span></pre></div>
</div>
</div>

<ul>
  <li>
<code>&lt;script&gt;</code>: gives the unique URI of the script that this job wishes to use</li>
  <li>
<code>&lt;input&gt;</code>: contains the input document(s) for the input port given by <code>@name</code>
</li>
  <li>
<code>&lt;option&gt;</code>: option value</li>
  <li>
<code>&lt;callback&gt;</code>: the [WebServicePush push notification] callback</li>
</ul>

<p>The inputs and options for a script can be retrieved by requesting a
description of that particular script. This data is then used when
building the job request.</p>

<p>A job can be created using local file system references, inline XML or a multi-part upload.</p>

<h2 id="1-local-file-system-references">1. Local file system references</h2>

<p>This method is appropriate when the Pipeline server is running in
“local file system” mode (see
<a href="/pipeline/Configuration-Files">configuration</a>). In this case the <code>input</code> and
<code>option</code> elements may reference absolute file URIs. An example:</p>

<div class="language-xml highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span class="tag">&lt;jobRequest</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">'</span><span class="content">http://www.daisy.org/ns/pipeline/data</span><span class="delimiter">'</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;script</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">'</span><span class="content">http://example.org/ws/scripts/dtbook-to-zedai</span><span class="delimiter">'</span></span><span class="tag">/&gt;</span>
<span class="inline">    <span class="tag">&lt;input</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">'</span><span class="content">source</span><span class="delimiter">'</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;item</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">'</span><span class="content">file:///home/user/dtbook-basic.xml</span><span class="delimiter">'</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/input&gt;</span>
    <span class="tag">&lt;option</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">'</span><span class="content">opt-mods-filename</span><span class="delimiter">'</span></span><span class="tag">&gt;</span>the-mods-file.xml<span class="tag">&lt;/option&gt;</span>
    <span class="tag">&lt;option</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">'</span><span class="content">opt-css-filename</span><span class="delimiter">'</span></span><span class="tag">&gt;</span>the-css-file.css<span class="tag">&lt;/option&gt;</span>
    <span class="tag">&lt;option</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">'</span><span class="content">opt-zedai-filename</span><span class="delimiter">'</span></span><span class="tag">&gt;</span>the-zedai-file.xml<span class="tag">&lt;/option&gt;</span>
&lt;<span class="regexp"><span class="delimiter">/</span><span class="content">jobRequest&gt;
</span></span></span></pre></div>
</div>
</div>

<p>Another example to demonstrate absolute URIs in an <code>option</code>:</p>

<div class="language-xml highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span class="tag">&lt;jobRequest</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">'</span><span class="content">http://www.daisy.org/ns/pipeline/data</span><span class="delimiter">'</span></span><span class="tag">&gt;</span>
   <span class="tag">&lt;script</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">'</span><span class="content">http://localhost:8181/ws/scripts/epub3-to-epub3</span><span class="delimiter">'</span></span><span class="tag">/&gt;</span>
<span class="inline">   <span class="tag">&lt;option</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">'</span><span class="content">source</span><span class="delimiter">'</span></span><span class="tag">&gt;</span>file:///home/user/accessible_epub_3.epub<span class="tag">&lt;/option&gt;</span>
&lt;<span class="regexp"><span class="delimiter">/</span><span class="content">jobRequest&gt;
</span></span></span></pre></div>
</div>
</div>

<h2 id="2-inline-xml">2. Inline XML</h2>

<p>This method is appropriate if the only files involved are XML, and no
external files (e.g. JPEGs) are required. The input XML document(s),
in this case DTBook documents, are nested in the job request itself:</p>

<div class="language-xml highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span class="tag">&lt;jobRequest</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">'</span><span class="content">http://www.daisy.org/ns/pipeline/data</span><span class="delimiter">'</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;script</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">'</span><span class="content">http://example.org/ws/scripts/dtbook-to-zedai</span><span class="delimiter">'</span></span><span class="tag">/&gt;</span>
<span class="inline">    <span class="tag">&lt;input</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">'</span><span class="content">source</span><span class="delimiter">'</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;docwrapper&gt;</span>
            <span class="tag">&lt;dtbook</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">'</span><span class="content">http://www.daisy.org/z3986/2005/dtbook/</span><span class="delimiter">'</span></span> <span class="attribute-name">version</span>=<span class="string"><span class="delimiter">'</span><span class="content">2005-3</span><span class="delimiter">'</span></span> <span class="attribute-name">xml:lang</span>=<span class="string"><span class="delimiter">'</span><span class="content">en-US</span><span class="delimiter">'</span></span><span class="tag">&gt;</span>
                <span class="tag">&lt;head&gt;</span>
                    ...
                <span class="tag">&lt;/head&gt;</span>
                <span class="tag">&lt;book&gt;</span>
                    ...
                <span class="tag">&lt;/book&gt;</span>
            <span class="tag">&lt;/dtbook&gt;</span>
        <span class="tag">&lt;/docwrapper&gt;</span>
    <span class="tag">&lt;/input&gt;</span>
&lt;<span class="regexp"><span class="delimiter">/</span><span class="content">jobRequest&gt;
</span></span></span></pre></div>
</div>
</div>

<p>If a sequence of documents is being passed to a port, then a series of
<code>&lt;docwrapper&gt;</code> elements should be used:</p>

<div class="language-xml highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span class="tag">&lt;input</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">"</span><span class="content">source</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;docwrapper&gt;</span>
                <span class="tag">&lt;dtbook&gt;</span>...<span class="tag">&lt;/dtbook&gt;</span>
        <span class="tag">&lt;/docwrapper&gt;</span>
        <span class="tag">&lt;docwrapper&gt;</span>
                <span class="tag">&lt;dtbook&gt;</span>...<span class="tag">&lt;/dtbook&gt;</span>
        <span class="tag">&lt;/docwrapper&gt;</span>
        <span class="tag">&lt;docwrapper&gt;</span>
                <span class="tag">&lt;dtbook&gt;</span>...<span class="tag">&lt;/dtbook&gt;</span>
        <span class="tag">&lt;/docwrapper&gt;</span>
<span class="tag">&lt;/input&gt;</span>
</pre></div>
</div>
</div>

<h2 id="3-multipart-zip-upload">3. Multipart zip upload</h2>

<p>Sometimes the input file’s context is required in order to perform the
operation. An example is when the input file references images, and
those images will be copied to the output directory. In cases like
this, it is necessary to zip the input documents along with their data
and submit the zip file as part of a multi-part upload.</p>

<p>The first part of the multi-part upload, identified as <code>job-data</code>, is
a zip file containing input data.</p>

<p>The other part of the multi-part upload, identified as <code>job-request</code>,
is an XML file describing the job request:</p>

<div class="language-xml highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span class="tag">&lt;jobRequest</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">'</span><span class="content">http://www.daisy.org/ns/pipeline/data</span><span class="delimiter">'</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;script</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">'</span><span class="content">http://example.org/ws/scripts/dtbook-to-zedai</span><span class="delimiter">'</span></span><span class="tag">/&gt;</span>
<span class="inline">    <span class="tag">&lt;input</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">'</span><span class="content">source</span><span class="delimiter">'</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;item</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">'</span><span class="content">./dtbook-basic.xml</span><span class="delimiter">'</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/input&gt;</span>
    <span class="tag">&lt;option</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">'</span><span class="content">opt-mods-filename</span><span class="delimiter">'</span></span><span class="tag">&gt;</span>the-mods-file.xml<span class="tag">&lt;/option&gt;</span>
    <span class="tag">&lt;option</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">'</span><span class="content">opt-css-filename</span><span class="delimiter">'</span></span><span class="tag">&gt;</span>the-css-file.css<span class="tag">&lt;/option&gt;</span>
    <span class="tag">&lt;option</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">'</span><span class="content">opt-zedai-filename</span><span class="delimiter">'</span></span><span class="tag">&gt;</span>the-zedai-file.xml<span class="tag">&lt;/option&gt;</span>
&lt;<span class="regexp"><span class="delimiter">/</span><span class="content">jobRequest&gt;
</span></span></span></pre></div>
</div>
</div>

<p>Both parts are mandatory.</p>

<p>The <code>&lt;input&gt;</code> element contains one or more <code>&lt;item&gt;</code> element children,
each referring to a file in the attached zip by its relative path
(relative to the root of the zip file).</p>

<p>When creating the multi-part request, the following conventions must be observed:</p>

<ul>
  <li>The field name for the zip data is “job-data”</li>
  <li>The field name for the job request XML is “job-request”</li>
  <li>The content type for the job request is “multipart/form-data”</li>
</ul>

    </div>
  </body>
</html>
