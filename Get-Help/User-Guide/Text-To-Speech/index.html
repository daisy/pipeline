<!DOCTYPE html>
<html lang="en" prefix="dc: http://purl.org/dc/elements/1.1/
              dp2: http://www.daisy.org/ns/pipeline/">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta charset="utf-8">
    <meta http-equiv="content-language" content="en">
    <title>Text-To-Speech Configuration</title>
    
  <meta prefix="dc: http://purl.org/dc/elements/1.1/" property="dc:title" content="Text-To-Speech Configuration">


    <link rel="stylesheet" href="/pipeline/css/default.css">
    <link rel="stylesheet" href="/pipeline/css/coderay.css">
    <link rel="shortcut icon" href="http://www.daisy.org/sites/default/files/favicon_0.ico">

  </head>
  <body>
    <div id="body">
      <nav id="nav-sitemap">
  
  <ul class="spine">
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline" tabindex="1">
      
      Home
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/Download.html" tabindex="2">
      
      Download
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      <a href="/pipeline/Get-Help" tabindex="3">
      Help
      </a>
      
      <ul class="spine">
  
    
      
        <li class="spine-item">
      
      <a href="/pipeline/Get-Help/User-Guide" tabindex="7">
      User Guide
      </a>
      
      <ul class="spine">
  
    
      
        <li class="spine-item">
      
      <a href="/pipeline/Get-Help/User-Guide/Installation" tabindex="8">
      Installation
      </a>
      
      <ul class="spine">
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/Get-Help/User-Guide/Web-Application/Installation-and-configuation" tabindex="9">
      
      Web Application
      </a>
    
    </li>
  
</ul>

    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/Get-Help/User-Guide/Desktop-Application/Quick-Start-Guide" tabindex="10">
      
      Desktop Application
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      <a href="/pipeline/Get-Help/User-Guide/Web-Application/User-Guide" tabindex="11">
      Web Application
      </a>
      
      <ul class="spine">
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/Get-Help/User-Guide/Web-Application/Templating" tabindex="12">
      
      Templating
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/Get-Help/User-Guide/Web-Application/Administrator-settings" tabindex="13">
      
      Administrator Settings
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/Get-Help/User-Guide/Web-Application/Branding" tabindex="14">
      
      Branding
      </a>
    
    </li>
  
</ul>

    
    </li>
  
    
      
        <li class="spine-item">
      
      <a href="/pipeline/Get-Help/User-Guide/Pipeline-as-Service" tabindex="15">
      Pipeline as a Service
      </a>
      
      <ul class="spine">
  
    
      
        <li class="spine-item">
      
      <a href="/pipeline/Configuration-Files" tabindex="16">
      Configuration Files
      </a>
      
      <ul class="spine">
  
    
      
        <li class="spine-item">
      
      
        <a href="https://daisy.github.io/pipeline/modules/tts-common/doc/tts-config.html" class="external-link" target="_blank" tabindex="17">
      
      Text-To-Speech Configuration
      </a>
    
    </li>
  
</ul>

    
    </li>
  
</ul>

    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/Get-Help/User-Guide/Command-Line" tabindex="18">
      
      Command Line
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      <a href="/pipeline/Get-Help/User-Guide/Scripts" tabindex="19">
      Scripts
      </a>
      
      <ul class="spine">
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/daisy202-utils/doc" tabindex="20">
      
      DAISY 2.02 Unscrambler
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/daisy202-validator/doc" tabindex="21">
      
      DAISY 2.02 Validator
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/daisy202-to-daisy3/doc" tabindex="22">
      
      DAISY 2.02 to DAISY 3
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/daisy202-to-epub3/doc" tabindex="23">
      
      DAISY 2.02 to EPUB 3
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/daisy202-to-mp3/doc" tabindex="24">
      
      DAISY 2.02 to MegaVoice multi-level
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/daisy3-utils/doc" tabindex="25">
      
      DAISY 3 Upgrader
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/daisy3-to-daisy202/doc" tabindex="26">
      
      DAISY 3 to DAISY 2.02
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/daisy3-to-epub3/doc" tabindex="27">
      
      DAISY 3 to EPUB 3
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/daisy3-to-mp3/doc" tabindex="28">
      
      DAISY 3 to MegaVoice multi-level
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/dtbook-validator/doc" tabindex="29">
      
      DTBook Validator
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/dtbook-to-daisy3/doc" tabindex="30">
      
      DTBook to DAISY 3
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/dtbook-to-ebraille/doc" tabindex="31">
      
      DTBook to eBraille
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/dtbook-to-epub3/doc" tabindex="32">
      
      DTBook to EPUB 3
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/dtbook-to-html/doc" tabindex="33">
      
      DTBook to HTML
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/dtbook-to-odt/doc" tabindex="34">
      
      DTBook to ODT
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/braille/dtbook-to-pef/doc" tabindex="35">
      
      DTBook to PEF
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/dtbook-to-rtf/doc" tabindex="36">
      
      DTBook to RTF
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/dtbook-to-zedai/doc" tabindex="37">
      
      DTBook to ZedAI
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/epub2-to-epub3/doc" tabindex="38">
      
      EPUB Upgrader
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/epub3-to-epub3/doc" tabindex="39">
      
      EPUB 3 Enhancer
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/epub3-validator/doc" tabindex="40">
      
      EPUB 3 Validator
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/epub3-to-daisy202/doc" tabindex="41">
      
      EPUB 3 to DAISY 2.02
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/epub3-to-daisy3/doc" tabindex="42">
      
      EPUB 3 to DAISY 3
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/braille/epub3-to-pef/doc" tabindex="43">
      
      EPUB 3 to PEF
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/epub-to-daisy/doc" tabindex="44">
      
      EPUB to DAISY
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/html-to-dtbook/doc" tabindex="45">
      
      HTML to DTBook
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/html-to-epub3/doc" tabindex="46">
      
      HTML to EPUB3
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/braille/html-to-pef/doc" tabindex="47">
      
      HTML to PEF
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/nimas-fileset-validator/doc" tabindex="48">
      
      NIMAS Fileset Validator
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/word-to-dtbook/doc" tabindex="49">
      
      Word to DTBook
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/zedai-to-epub3/doc" tabindex="50">
      
      ZedAI to EPUB 3
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/zedai-to-html/doc" tabindex="51">
      
      ZedAI to HTML
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/braille/zedai-to-pef/doc" tabindex="52">
      
      ZedAI to PEF
      </a>
    
    </li>
  
</ul>

    
    </li>
  
</ul>

    
    </li>
  
    
      
        <li class="spine-item">
      
      <a href="/pipeline/Get-Help/API-Documentation" tabindex="53">
      API Documentation
      </a>
      
      <ul class="spine">
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/WebServiceAPI" tabindex="54">
      
      Web Service API
      </a>
    
    </li>
  
</ul>

    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/Get-Help/Issue-Tracker.html" tabindex="55">
      
      Issue Tracker
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      <a href="/pipeline/Get-Help/Troubleshooting" tabindex="56">
      Troubleshooting
      </a>
      
      <ul class="spine">
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/Get-Help/User-Guide/Desktop-Application/Troubleshooting" tabindex="57">
      
      Troubleshooting Desktop Application
      </a>
    
    </li>
  
</ul>

    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="https://github.com/daisy/pipeline/discussions" class="external-link" target="_blank" tabindex="58">
      
      Forum
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="mailto:daisy-pipeline@mail.daisy.org" tabindex="59">
      
      Contact
      </a>
    
    </li>
  
</ul>

    
    </li>
  
    
      
        <li class="spine-item">
      
      <a href="/pipeline/Contribute" tabindex="4">
      Contribute
      </a>
      
      <ul class="spine">
  
    
      
        <li class="spine-item">
      
      
        <a href="https://github.com/daisy/pipeline" class="external-link" target="_blank" tabindex="60">
      
      Source Code
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      <a href="/pipeline/Contribute/Developer-Guide" tabindex="61">
      Developer Guide
      </a>
      
      <ul class="spine">
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/Contribute/Developer-Guide/Sources" tabindex="62">
      
      Source Code
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/Contribute/Developer-Guide/Building" tabindex="63">
      
      Build System
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/Modules" tabindex="64">
      
      Writing Modules
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      <a href="/pipeline/Contribute/Developer-Guide/XProc" tabindex="65">
      XProc
      </a>
      
      <ul class="spine">
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/XProcExtensions" tabindex="66">
      
      XProc Extensions
      </a>
    
    </li>
  
</ul>

    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/Contribute/Developer-Guide/Testing" tabindex="67">
      
      Testing
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/Contribute/Developer-Guide/Debugging" tabindex="68">
      
      Debugging
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/Contribute/Developer-Guide/Releasing" tabindex="69">
      
      Release Management
      </a>
    
    </li>
  
</ul>

    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/Contribute/Easy-Hacks.html" tabindex="70">
      
      Easy Hacks
      </a>
    
    </li>
  
</ul>

    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/Support" tabindex="5">
      
      Support​
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="http://www.daisy.org" class="external-link" target="_blank" tabindex="6">
      
      DAISY Home
      </a>
    
    </li>
  
</ul>

</nav>



<script type="text/javascript">
var onload = function() {
  var nav = document.getElementById('nav-sitemap');
  var navTopBefore = nav.offsetTop;
  var fixed = (navTopBefore < window.pageYOffset);
  if (fixed) {
    nav.classList.add('fixed');
  }
  // FIXME: this is a hack! styling should not be handled here!
  var body = document.getElementsByTagName('body')[0];
  var leftNav = document.getElementById('nav-sitemap-left');
  var setLeftNavHeight = function() {
    if (fixed) {
      leftNav.style.height = (window.innerHeight - 34) + "px";
    } else {
      leftNav.style.height = Math.max(window.innerHeight - 219, body.offsetHeight - 175) + "px";
	  // "height: auto" doesn't work if the auto height of leftNav is greater
	  // than window.innerHeight and body.offsetHeight: it would mess up the
	  // transition because the transition would influence the pageYOffset
	  // and thereby canceling itself, making it impossible to scroll down.
    }
  }
  setLeftNavHeight();
  window.onscroll = function(e) {
    if (fixed && window.pageYOffset < navTopBefore) {
      nav.classList.remove('fixed');
	  fixed = false;
      setLeftNavHeight();
    } else if (!fixed && window.pageYOffset > navTopBefore) {
      nav.classList.add('fixed');
	  fixed = true;
      setLeftNavHeight();
    }
  }
  window.onresize = setLeftNavHeight;
};
if (window.addEventListener) {
  window.addEventListener('load', onload);
} else {
  window.attachEvent('onload', onload);
}
</script>


      <link rel="dp2:permalink" href="http://daisy.github.io/pipeline/Get-Help/User-Guide/Text-To-Speech/">

<h1 id="text-to-speech-configuration">Text-To-Speech Configuration</h1>

<p>The following scripts support the production of an aural presentation
of the document via speech synthesis, or “text-to-speech” (TTS):</p>

<ul>
  <li>
<a href="/pipeline/Get-Help/User-Guide/Scripts/dtbook-to-daisy3">DTBook to DAISY 3</a>,</li>
  <li>
<a href="/pipeline/Get-Help/User-Guide/Scripts/dtbook-to-epub3">DTBOOK to EPUB 3</a>,</li>
  <li>
<a href="/pipeline/Get-Help/User-Guide/Scripts/zedai-to-epub3">ZedAI to EPUB 3</a>,</li>
  <li>
<a href="/pipeline/Get-Help/User-Guide/Scripts/epub3-to-epub3">EPUB 3 enhancer</a> and</li>
  <li><a href="/pipeline/Get-Help/User-Guide/Scripts/epub-to-daisy">EPUB to DAISY</a></li>
</ul>

<p>The result is either an audio-only version of the document, or the
combination of a text layer and an audio layer synchronized with each
other.</p>

<p>The way text-to-speech is configured is common to all scripts. Speech
engines are configured with <a href="/pipeline/Configuration-Files#user-properties">user
properties</a>,
and the exact aural rendering of the document (TTS voices,
pronunciations, speech pitch, speech rates, speech levels, etc.) is
controlled with TTS configuration files, CSS style sheets and PLS
lexicons.</p>

<p>TTS configuration files may either be specified through the
<code>org.daisy.pipeline.tts.config</code> user property, or through an optional
script input.</p>

<dl>
  <dt><code>org.daisy.pipeline.tts.config</code></dt>
  <dd>File to load TTS configuration from</dd>
  <dd>Defaults to the file “tts-default-config.xml” located in the “etc/”
directory in the base directory of the Pipeline installation, or
“/etc/opt/daisy-pipeline2/tts-default-config.xml” on Debian/Ubuntu.</dd>
</dl>

<p>The TTS configuration file format is as follows:</p>

<div class="language-xml highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span class="tag">&lt;config&gt;</span>
  <span class="tag">&lt;voice</span> <span class="attribute-name">engine</span>=<span class="string"><span class="delimiter">"</span><span class="content">acapela</span><span class="delimiter">"</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">"</span><span class="content">claire</span><span class="delimiter">"</span></span> <span class="attribute-name">lang</span>=<span class="string"><span class="delimiter">"</span><span class="content">fr</span><span class="delimiter">"</span></span> <span class="attribute-name">gender</span>=<span class="string"><span class="delimiter">"</span><span class="content">female-adult</span><span class="delimiter">"</span></span> <span class="attribute-name">priority</span>=<span class="string"><span class="delimiter">"</span><span class="content">12</span><span class="delimiter">"</span></span><span class="tag">/&gt;</span>
  ...
<span class="tag">&lt;/config&gt;</span>
</pre></div>
</div>
</div>

<!--
TODO: what about <annotations type="" href="">
                    ...
                 </annotations>
-->

<!-- The elements can be put in any namespace since namespaces aren’t
checked. If there is any syntax error in the file, you will be
notified in the server’s logs. -->

<!-- TODO: invent a media type, for example:
`application/vnd.pipeline.tss-config+xml` -->

<h2 id="engine-configuration">Engine configuration</h2>

<p>The audio encoder LAME must be installed.
<!-- LAME's location must be in the system PATH (i.e. $PATH on Unix,
%PATH% on Windows), unless it is provided via the 'lame.path' system
property. -->
In addition, one of the following text-to-speech processors must be
installed.</p>

<p>For Unix users,</p>

<ul>
  <li>
<a href="http://www.acapela-group.com" class="external-link" target="_blank">Acapela</a>;</li>
  <li>
<a href="http://espeak.sourceforge.net/" class="external-link" target="_blank">eSpeak</a>.</li>
</ul>

<p>For Windows users,</p>

<ul>
  <li>
<a href="http://espeak.sourceforge.net/" class="external-link" target="_blank">eSpeak</a>;</li>
  <li>
<a href="https://en.wikipedia.org/wiki/Microsoft_Speech_API" class="external-link" target="_blank">SAPI</a> with adequate voices.</li>
</ul>

<p>For MacOS users,</p>

<ul>
  <li>
<a href="https://developer.apple.com/legacy/library/documentation/Darwin/Reference/ManPages/man1/say.1.html" class="external-link" target="_blank">say</a>.</li>
</ul>

<p>The following online text-to-speech processor can also be used for
all users, given they have an account for the service 
and the appropriate plan or license :</p>

<ul>
  <li><a href="https://cloud.google.com/text-to-speech" class="external-link" target="_blank">Google Cloud Text-To-Speech</a></li>
</ul>

<p>It is strongly recommended to install eSpeak anyway, as it can handle
almost any language out there.
<!-- Just as Lame’s directory must be in the system PATH if it were
installed in a dedicated subdirectory, you may need to append eSpeak’s
installation directory to your PATH as well. On Unix systems, 'apt-get
install' already takes care of installing eSpeak to a known
location. On Windows, however, the PATH variable must be changed
manually using the 'environment variables' panel.--></p>

<p>The audio encoder and the TTS processors are configured with user
properties. The following properties are available:</p>

<h3 id="common-settings">Common settings</h3>

<dl>
  <dt><code>org.daisy.pipeline.tts.audio.tmpdir</code></dt>
  <dd>Temporary directory used during audio synthesis</dd>
  <dd>Defaults to “${java.io.tmpdir}”</dd>
  <dt><code>org.daisy.pipeline.tts.mp3.bitrate</code></dt>
  <dd>Bit rate of MP3 files</dd>
  <dt><code>org.daisy.pipeline.tts.maxmem</code></dt>
  <dd>Maximum amount of memory in Mb to be used by TTS and audio encoding</dd>
  <dd>Defaults to 50% of the total amount of memory that the JVM will
attempt to use, or 500 Mb if there is no such limit</dd>
  <dd>FIXME</dd>
  <dt><code>org.daisy.pipeline.tts.threads.number</code></dt>
  <dd>Number of threads for audio encoding and regular text-to-speech</dd>
  <dd>Defaults to the number of processors available to the JVM</dd>
  <dt><code>org.daisy.pipeline.tts.threads.encoding.number</code></dt>
  <dd>Number of audio encoding threads</dd>
  <dd>Defaults to “${org.daisy.pipeline.tts.threads.number}”</dd>
  <dt><code>org.daisy.pipeline.tts.threads.speaking.number</code></dt>
  <dd>Number of regular text-to-speech threads</dd>
  <dd>Defaults to “${org.daisy.pipeline.tts.threads.number}”</dd>
  <dt><code>org.daisy.pipeline.tts.threads.each.memlimit</code></dt>
  <dd>Maximum amount of memory consumed by each text-to-speech thread (in Mb)</dd>
  <dd>Defaults to “20”</dd>
  <dt><code>org.daisy.pipeline.tts.encoding.speed</code></dt>
  <dd>Maximum number of seconds of encoded audio per seconds of encoding</dd>
  <dd>Defaults to “2.0”</dd>
</dl>

<h3 id="acapela">Acapela</h3>

<dl>
  <dt><code>org.daisy.pipeline.tts.acapela.samplerate</code></dt>
  <dd>Sample rate (in Hz)</dd>
  <dd>Defaults to “22050”</dd>
  <dt><code>org.daisy.pipeline.tts.acapela.threads.reserved</code></dt>
  <dd>Number of reserved text-to-speech threads</dd>
  <dd>Defaults to “3”</dd>
  <dt><code>org.daisy.pipeline.tts.acapela.speed</code></dt>
  <dd>Defaults to “300”</dd>
  <dt><code>org.daisy.pipeline.tts.acapela.servers</code></dt>
  <dd>Defaults to “localhost:0”</dd>
  <dt><code>org.daisy.pipeline.tts.acapela.priority</code></dt>
  <dd>This engine is chosen over another engine that serves the same voice
if this one has a higher priority.</dd>
  <dd>Defaults to “15”</dd>
</dl>

<!--
### AT&T

tts-adapter-attnative:

`org.daisy.pipeline.tts.att.servers`
: Address of the AT&T server
: Defaults to "localhost:8888"

`org.daisy.pipeline.tts.att.priority`
: Priority with which the AT&T engine is chosen over other TTS engines
  that serve the same voice.
: Defaults to "10"


tts-adapter-attbin:

`org.daisy.pipeline.tts.att.servers`
: Address of the AT&T server
: Defaults to "localhost:8888"

`org.daisy.pipeline.tts.att.client.path`
: Path to the "TTSClientFile" executable
: If not specified, Pipeline will automatically look for
  "TTSClientFile" in the directories specified by the "PATH"
  environment variable.

`org.daisy.pipeline.tts.att.bin.priority`
: Priority with which the AT&T engine is chosen over other TTS engines
  that serve the same voice.
: Defaults to "5"

-->

<h3 id="espeak">eSpeak</h3>

<dl>
  <dt><code>org.daisy.pipeline.tts.espeak.path</code></dt>
  <dd>Path to eSpeak executable</dd>
  <dd>If not specified, Pipeline will automatically look for “espeak” in
the directories specified by the “PATH” environment variable.</dd>
  <dt><code>org.daisy.pipeline.tts.espeak.priority</code></dt>
  <dd>This engine is chosen over another engine that serves the same voice
if this one has a higher priority.</dd>
  <dd>Defaults to “2”</dd>
</dl>

<h3 id="mac-os">Mac OS</h3>

<dl>
  <dt><code>org.daisy.pipeline.tts.osxspeech.path</code></dt>
  <dd>Alternative path to OSX’s command line program “say”</dd>
  <dd>Defaults to “/usr/bin/say”</dd>
  <dt><code>org.daisy.pipeline.tts.osxspeech.priority</code></dt>
  <dd>This engine is chosen over another engine that serves the same voice
if this one has a higher priority.</dd>
  <dd>Defaults to “2”</dd>
</dl>

<h3 id="sapi">SAPI</h3>

<dl>
  <dt><code>org.daisy.pipeline.tts.sapi.samplerate</code></dt>
  <dd>Sample rate (in Hz)</dd>
  <dd>Defaults to “22050”</dd>
  <dd>Only applies to legacy SAPI voices.</dd>
  <dd>Can not be overridden at runtime. The server must be restarted to
change this property.</dd>
  <dt><code>org.daisy.pipeline.tts.sapi.bytespersample</code></dt>
  <dd>Defaults to “2”</dd>
  <dd>Only applies to legacy SAPI voices.</dd>
  <dd>Can not be overridden at runtime. The server must be restarted to
change this property.</dd>
  <dt><code>org.daisy.pipeline.tts.sapi.priority</code></dt>
  <dd>This engine is chosen over another engine that serves the same voice
if this one has a higher priority.</dd>
  <dd>Defaults to “7”</dd>
</dl>

<h3 id="qfrency">Qfrency</h3>

<dl>
  <dt><code>org.daisy.pipeline.tts.qfrency.path</code></dt>
  <dd>Path to “synth” executable</dd>
  <dd>If not specified, will automatically look for “synth” in the
directories specified by the environment variable “PATH”.</dd>
  <dt><code>org.daisy.pipeline.tts.qfrency.address</code></dt>
  <dd>Address of the Qfrency server</dd>
  <dd>Defaults to “localhost”</dd>
  <dt><code>org.daisy.pipeline.tts.qfrency.priority</code></dt>
  <dd>This engine is chosen over another engine that serves the same voice
if this one has a higher priority.</dd>
  <dd>Defaults to “2”</dd>
</dl>

<h3 id="google-cloud-text-to-speech">Google Cloud Text-to-speech</h3>

<dl>
  <dt><code>org.daisy.pipeline.tts.google.apikey</code></dt>
  <dd>API key to connect to Google Text-To-Speech service. See
<a href="https://cloud.google.com/docs/authentication/api-keys" class="external-link" target="_blank">Authenticate using API
keys</a>.</dd>
  <dd>Mandatory</dd>
  <dt><code>org.daisy.pipeline.tts.google.samplerate</code></dt>
  <dd>Sample rate (in Hz)</dd>
  <dd>Defaults to “22050”</dd>
  <dt><code>org.daisy.pipeline.tts.google.priority</code></dt>
  <dd>This engine is chosen over another engine that serves the same voice
if this one has a higher priority.</dd>
  <dd>Defaults to “15”</dd>
</dl>

<h3 id="microsoft-azure-cognitive-speech-services">Microsoft Azure Cognitive Speech Services</h3>

<dl>
  <dt><code>org.daisy.pipeline.tts.azure.key</code></dt>
  <dd>Access key of your Cognitive Speech resource</dd>
  <dd>Mandatory</dd>
  <dt><code>org.daisy.pipeline.tts.azure.region</code></dt>
  <dd>Region of your Cognitive Speech resource</dd>
  <dd>Mandatory</dd>
  <dt><code>org.daisy.pipeline.tts.azure.threads</code></dt>
  <dd>Number of reserved text-to-speech threads</dd>
  <dd>Defaults to “2”</dd>
  <dt><code>org.daisy.pipeline.tts.azure.priority</code></dt>
  <dd>This engine is chosen over another engine that serves the same voice
if this one has a higher priority.</dd>
  <dd>Defaults to “15”</dd>
</dl>

<h3 id="cereproc">CereProc</h3>

<dl>
  <dt><code>org.daisy.pipeline.tts.cereproc.server</code></dt>
  <dd>Host address of CereProc server</dd>
  <dd>Defaults to “localhost”</dd>
  <dt><code>org.daisy.pipeline.tts.cereproc.port</code></dt>
  <dd>Port of CereProc server for regular voices</dd>
  <dd>Mandatory</dd>
  <dt><code>org.daisy.pipeline.tts.cereproc.client</code></dt>
  <dd>Location of client program for communicating with CereProc server</dd>
  <dd>Defaults to “/usr/bin/cspeechclient”</dd>
  <dt><code>org.daisy.pipeline.tts.cereproc.priority</code></dt>
  <dd>This engine is chosen over another engine that serves the same voice
if this one has a higher priority.</dd>
  <dd>Defaults to “15”</dd>
  <dt><code>org.daisy.pipeline.tts.cereproc.dnn.port</code></dt>
  <dd>Port of CereProc server for DNN voices</dd>
  <dd>Mandatory</dd>
  <dt><code>org.daisy.pipeline.tts.cereproc.dnn.priority</code></dt>
  <dd>This engine is chosen over another engine that serves the same voice
if this one has a higher priority.</dd>
  <dd>Defaults to “15”</dd>
</dl>

<h3 id="lame-encoder">LAME encoder</h3>

<dl>
  <dt><code>org.daisy.pipeline.tts.lame.path</code></dt>
  <dd>Path to LAME executable</dd>
  <dd>If not specified, will automatically look for “lame” in the
directories specified by the environment variable “PATH”.</dd>
  <dt><code>org.daisy.pipeline.tts.lame.cli.options</code></dt>
  <dd>Additional command line options passed to lame</dd>
  <dd>Deprecated</dd>
</dl>

<h2 id="css">CSS</h2>

<p>The text-to-speech voices and prosody can be configured with aural
CSS. To do so, attach CSS style sheets to the source document. Style
sheets can be linked (using an <a href="https://www.w3.org/TR/xml-stylesheet" class="external-link" target="_blank">‘xml-stylesheet’ processing
instruction</a> or a <a href="https://www.w3.org/Style/styling-XML#External" class="external-link" target="_blank">‘link’
element</a>), embedded
(using a <a href="https://www.w3.org/Style/styling-XML#Embedded" class="external-link" target="_blank">‘style’
element</a>) and/or
inlined (using ‘<a href="https://www.w3.org/TR/css-style-attr/" class="external-link" target="_blank">style’
attributes</a>). Below is an
example of an aural CSS style sheet:</p>

<div class="language-css highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span class="tag">p</span> {
  <span class="key">volume</span>: <span class="value">soft</span>;
  <span class="key">voice-family</span>: <span class="value">female</span>;
}
</pre></div>
</div>
</div>

<p>The CSS properties that are supported by DAISY Pipeline are a subset
of <a href="https://www.w3.org/TR/CSS2/aural.html" class="external-link" target="_blank">Aural CSS 2.1</a> (and partly
inspired by <a href="https://www.w3.org/TR/css3-speech" class="external-link" target="_blank">CSS 3 Speech</a>):</p>

<dl>
  <dt><a href="https://www.w3.org/TR/css-speech-1/#voice-props-voice-famil" class="external-link" target="_blank"><code>voice-family</code></a></dt>
  <dd>Used for selecting a voice based on gender, age, name and/or vendor.</dd>
  <dd>See text below.
<!-- see also <ssml:voice> -->
</dd>
  <dt><a href="https://www.w3.org/TR/CSS2/aural.html#propdef-speak" class="external-link" target="_blank"><code>speak</code></a></dt>
  <dd>“none” or “spell-out”</dd>
  <dd>Used for preventing certain text to be rendered aurally, or for
spelling text one letter at a time.
<!-- see also CSS3 "speak" and "speak-as" properties -->
<!-- see also <ssml:say-as interpret-as="..."> -->
</dd>
  <dt><a href="https://www.w3.org/TR/CSS2/aural.html#propdef-volume" class="external-link" target="_blank"><code>volume</code></a></dt>
  <dd>A number, “silent”, “x-soft”, “soft”, “medium”, “loud” or “x-loud”</dd>
  <dd>Used for controlling the loudness of the speech.
<!-- see also CSS3 "voice-volume" property -->
<!-- see also <ssml:prosody volume="..."> -->
</dd>
  <dt><a href="https://www.w3.org/TR/CSS2/aural.html#propdef-pitch" class="external-link" target="_blank"><code>pitch</code></a></dt>
  <dd>“x-low”, “low”, “medium”, “high” or “x-high”</dd>
  <dd>Used for controlling the average pitch of the speech.
<!-- see also CSS3 "voice-pitch" property -->
<!-- see also <ssml:prosody pitch="..."> -->
</dd>
  <dt><a href="https://www.w3.org/TR/CSS2/aural.html#propdef-speech-rate" class="external-link" target="_blank"><code>speech-rate</code></a></dt>
  <dd>A number, “x-slow”, “slow”, “medium”, “fast” or “x-fast”</dd>
  <dd>Used for controlling the rate of the speech in terms of words per
minute.
<!-- see also CSS3 "voice-rate" property -->
<!-- see also <ssml:prosody rate="..."> -->
</dd>
  <dt><a href="https://www.w3.org/TR/CSS2/aural.html#propdef-pitch-range" class="external-link" target="_blank"><code>pitch-range</code></a></dt>
  <dd>A number</dd>
  <dd>Used for controlling the variation in average pitch of the speech.
<!-- see also CSS3 "voice-range" property -->
<!-- see also <ssml:prosody range="..."> -->
</dd>
  <dt><a href="https://www.w3.org/TR/CSS2/aural.html#propdef-speak-numeral" class="external-link" target="_blank"><code>speak-numeral</code></a></dt>
  <dd>“digits” or “continuous”</dd>
  <dd>Used for speaking out numbers one digit at a time.
<!-- see also CSS3 "speak-as" property -->
<!-- see also <ssml:say-as interpret-as="..."> -->
</dd>
  <dt>
<a href="https://www.w3.org/TR/CSS2/aural.html#propdef-pause-before" class="external-link" target="_blank"><code>pause-before</code></a>, <a href="https://www.w3.org/TR/CSS2/aural.html#propdef-pause-after" class="external-link" target="_blank"><code>pause-after</code></a> and <a href="https://www.w3.org/TR/CSS2/aural.html#propdef-pause" class="external-link" target="_blank"><code>pause</code></a>
</dt>
  <dd>A duration</dd>
  <dd>Used for specifying silences with a certain duration before or
after an element.
<!-- see also <ssml:break time="..."> -->
</dd>
  <dt>
<a href="https://www.w3.org/TR/CSS2/aural.html#propdef-cue-before" class="external-link" target="_blank"><code>cue-before</code></a>, <a href="https://www.w3.org/TR/CSS2/aural.html#propdef-cue-after" class="external-link" target="_blank"><code>cue-after</code></a> and <a href="https://www.w3.org/TR/CSS2/aural.html#propdef-cue" class="external-link" target="_blank"><code>cue</code></a>
</dt>
  <dd>A URL</dd>
  <dd>Used for playing pre-recorded sound clips before or after an
element.
<!-- see also <ssml:audio src="..."> -->
</dd>
</dl>

<!--
- [`stress`](https://www.w3.org/TR/CSS2/aural.html#propdef-stress)
- [`richness`](https://www.w3.org/TR/CSS2/aural.html#propdef-richness)
- [`azimuth`](https://www.w3.org/TR/CSS2/aural.html#propdef-azimuth)
- [`play-during`](https://www.w3.org/TR/CSS2/aural.html#propdef-play-during)
- [`elevation`](https://www.w3.org/TR/CSS2/aural.html#propdef-elevation)
- [`speak-punctuation`](https://www.w3.org/TR/CSS2/aural.html#propdef-speak-punctuation)
- [`speak-header`](https://www.w3.org/TR/CSS2/aural.html#propdef-speak-header)
-->

<p><a href="https://www.w3.org/TR/css-speech-1/#voice-props-voice-family" class="external-link" target="_blank"><code>voice-family</code></a>
specifies voice characteristics that place conditions on the voice
selection. A prioritized list of component values, separated by
commas, can be specified to indicate that they are alternatives.</p>

<p>If a full voice name is provided, e.g. <code>'Alice'</code>, this voice will be
selected regardless of the document language. If this voice is not
available, a fallback voice will be chosen such that it will match
with the same characteristics as those of the requested voice: same
language, same engine, same gender. If none is available, Pipeline
broadens its search by relaxing the criteria: first the gender is
relaxed, then the engine.</p>

<p>If no voice name is provided, e.g. <code>female 'Acapela'</code> or <code>old female</code>,
the selection algorithm will take into consideration only the voices
that match the current language. It starts by looking for a voice with
the specified gender and supplied by the specified engine, and will
broaden to any gender if the first search yielded no results. If
neither the gender nor the engine match, language will be the only
criterion.</p>

<p>When multiple voices match the criteria, the algorithm chooses the
voice with the highest priority. Each voice has a default priority,
though they can be overridden via the “voice” entries of the
configuration file, as follows:</p>

<div class="language-xml highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span class="tag">&lt;config&gt;</span>
  <span class="tag">&lt;voice</span> <span class="attribute-name">engine</span>=<span class="string"><span class="delimiter">"</span><span class="content">sapi</span><span class="delimiter">"</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">"</span><span class="content">Microsoft Todd</span><span class="delimiter">"</span></span> <span class="attribute-name">gender</span>=<span class="string"><span class="delimiter">"</span><span class="content">male-adult</span><span class="delimiter">"</span></span> <span class="attribute-name">priority</span>=<span class="string"><span class="delimiter">"</span><span class="content">100</span><span class="delimiter">"</span></span> <span class="attribute-name">lang</span>=<span class="string"><span class="delimiter">"</span><span class="content">en</span><span class="delimiter">"</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/config&gt;</span>
</pre></div>
</div>
</div>

<!-- TODO: "marks" attribute: you may set this attribute to "false" if
you have installed a new voice that can’t interpret SSML or mark-based
audio synchronization, which may compromise SAPI’s
initialization. Microsoft’s built-in voices do handle SSML and marks.
-->

<p>–&gt;
Notice that it is also a convenient way to add voices that are not
natively supported by the Pipeline. In the example above, Todd is now
a registered voice and, as such, can be selected automatically by the
Pipeline when the document is written in English.</p>

<p>AT&amp;T, eSpeak and Acapela’s voice names can be found in their
corresponding documentation. For Windows users, SAPI voices are
enumerated in the system settings (Start &gt; All Control Panel Items &gt;
Speech Recognition &gt; Advanced Speech Options). You will also need to
know the value of the “engine” attribute. This attribute must take as
value one of the following:</p>

<ul>
  <li>“att” for AT&amp;T voices;</li>
  <li>“espeak” for eSpeak voices;</li>
  <li>“acapela” for Acapela voices;</li>
  <li>“osx-speech” for Apple voices;</li>
  <li>“sapi” for Microsoft voices or for any other voice installed to work
with the SAPI engine, including some versions of AT&amp;T and Acapela’s
products.</li>
</ul>

<p>In case of any doubt, engines and voice names can be retrieved from
the server’s log in which all the voices are enumerated:</p>

<div class="language-plaintext highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre>Available voices:
* {engine:'sapi', name:'NTMNTTS Voice (Male)'} by sapi-native
* {engine:'acapela', name:'alice'} by acapela-jna --&gt;
</pre></div>
</div>
</div>

<h2 id="pls">PLS</h2>

<p>PLS lexicons allow you to define custom pronunciations of words. It is
meant to help TTS processors deal with ambiguous abbreviations and
pronunciation of proper names. When a word is defined in a lexicon the
processor will use the provided pronunciation in place of the default
rendering.</p>

<p>Lexicons are configured using the “lexicon” elements in the
configuration file. If the “href” attribute is missing, the pipeline
will read the lexicons inside the config nodes, as in this example:</p>

<div class="language-xml highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span class="tag">&lt;config&gt;</span>
  <span class="tag">&lt;lexicon</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.w3.org/2005/01/pronunciation-lexicon</span><span class="delimiter">"</span></span> <span class="attribute-name">version</span>=<span class="string"><span class="delimiter">"</span><span class="content">1.0</span><span class="delimiter">"</span></span>
           <span class="attribute-name">alphabet</span>=<span class="string"><span class="delimiter">"</span><span class="content">ipa</span><span class="delimiter">"</span></span> <span class="attribute-name">xml:lang</span>=<span class="string"><span class="delimiter">"</span><span class="content">en</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;lexeme&gt;</span>
      ...
    <span class="tag">&lt;/lexeme&gt;</span>
  <span class="tag">&lt;/lexicon&gt;</span>
<span class="tag">&lt;/config&gt;</span>
</pre></div>
</div>
</div>

<p>The syntax of a PLS lexicon is defined in
<a href="https://www.w3.org/TR/pronunciation-lexicon" class="external-link" target="_blank">Pronunciation Lexicon Specification Version 1.0</a>,
extended with regular expression matching. To enable regular
expression matching, add the “regex” attribute, as follows:</p>

<div class="language-xml highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span class="tag">&lt;lexicon</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.w3.org/2005/01/pronunciation-lexicon</span><span class="delimiter">"</span></span> <span class="attribute-name">version</span>=<span class="string"><span class="delimiter">"</span><span class="content">1.0</span><span class="delimiter">"</span></span>
         <span class="attribute-name">alphabet</span>=<span class="string"><span class="delimiter">"</span><span class="content">ipa</span><span class="delimiter">"</span></span> <span class="attribute-name">xml:lang</span>=<span class="string"><span class="delimiter">"</span><span class="content">en</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;lexeme</span> <span class="attribute-name">regex</span>=<span class="string"><span class="delimiter">"</span><span class="content">true</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;grapheme&gt;</span>([0-9]+)-([0-9]+)<span class="tag">&lt;/grapheme&gt;</span>
    <span class="tag">&lt;alias&gt;</span>between $1 and $2<span class="tag">&lt;/alias&gt;</span>
  <span class="tag">&lt;/lexeme&gt;</span>
<span class="tag">&lt;/lexicon&gt;</span>
</pre></div>
</div>
</div>

<p>The regex feature works only with alias-based substitutions. The regex
syntax used is that from
<a href="https://www.w3.org/TR/xpath-functions/#regex-syntax" class="external-link" target="_blank">XQuery 1.0 and XPath 2.0</a>.</p>

<p>Whether or not the regex attribute is set to “true”, the grapheme
matching can be made more accurate by specifying the
“positive-lookahead” and “negative-lookahead” attributes:</p>

<div class="language-xml highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span class="tag">&lt;lexicon</span> <span class="attribute-name">version</span>=<span class="string"><span class="delimiter">"</span><span class="content">1.0</span><span class="delimiter">"</span></span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.w3.org/2005/01/pronunciation-lexicon</span><span class="delimiter">"</span></span>
         <span class="attribute-name">alphabet</span>=<span class="string"><span class="delimiter">"</span><span class="content">ipa</span><span class="delimiter">"</span></span> <span class="attribute-name">xml:lang</span>=<span class="string"><span class="delimiter">"</span><span class="content">en</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;lexeme&gt;</span>
    <span class="tag">&lt;grapheme</span> <span class="attribute-name">positive-lookahead</span>=<span class="string"><span class="delimiter">"</span><span class="content">[ ]+is</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>SB<span class="tag">&lt;/grapheme&gt;</span>
    <span class="tag">&lt;alias&gt;</span>somebody<span class="tag">&lt;/alias&gt;</span>
  <span class="tag">&lt;/lexeme&gt;</span>
  <span class="tag">&lt;lexeme&gt;</span>
    <span class="tag">&lt;grapheme&gt;</span>SB<span class="tag">&lt;/grapheme&gt;</span>
    <span class="tag">&lt;alias&gt;</span>should be<span class="tag">&lt;/alias&gt;</span>
  <span class="tag">&lt;/lexeme&gt;</span>
  <span class="tag">&lt;lexeme</span> <span class="attribute-name">xml:lang</span>=<span class="string"><span class="delimiter">"</span><span class="content">fr</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;grapheme</span> <span class="attribute-name">positive-lookahead</span>=<span class="string"><span class="delimiter">"</span><span class="content">[ ]+[cC]ity</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>boston<span class="tag">&lt;/grapheme&gt;</span>
    <span class="tag">&lt;phoneme&gt;</span>bɔstøn<span class="tag">&lt;/phoneme&gt;</span>
  <span class="tag">&lt;/lexeme&gt;</span>
<span class="tag">&lt;/lexicon&gt;</span>
</pre></div>
</div>
</div>

<p>Graphemes with “positive-lookahead” will match if the beginning of
what follows matches the “position-lookahead” pattern. Graphemes with
“negative-lookahead” will match if the beginning of what follows does
not match the “negative-lookahead” pattern. The lookaheads are
case-sensitive while the grapheme contents are not.</p>

<p>The lexemes are reorganized so as to be matched in this order:</p>

<ol>
  <li>Graphemes with regex=”false” come first, no matter if there is a lookahead or not;</li>
  <li>Graphemes with regex=”true” and no lookahead;</li>
  <li>Graphemes with regex=”true” and one or two lookaheads.</li>
</ol>

<p>Within these categories, lexemes are matched in the same order as they
appear in the lexicons.</p>


    </div>
  </body>
</html>
