<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html vocab="http://www.daisy.org/ns/pipeline/" typeof="source">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta charset="utf-8">
<meta http-equiv="content-language" content="en">
<link rel="stylesheet" type="text/css" href="/pipeline/css/nxml-mode.css">
<link rel="shortcut icon" href="http://www.daisy.org/sites/default/files/favicon_0.ico">
<link rev="doc" href="../library.xpl">
</head>
<body><div class="code" about="../library.xpl">&lt;<span class="code-xml-element-prefix">p:</span><span class="code-xml-element-local-name">library</span> <span class="code-xml-attribute-prefix">xmlns:</span><span class="code-xml-attribute-local-name">p</span>=<span class="code-xml-attribute-value">"http://www.w3.org/ns/xproc"</span> <span class="code-xml-attribute-prefix">xmlns:</span><span class="code-xml-attribute-local-name">px</span>=<span class="code-xml-attribute-value">"http://www.daisy.org/ns/pipeline/xproc"</span> <span class="code-xml-attribute-prefix">xmlns:</span><span class="code-xml-attribute-local-name">cx</span>=<span class="code-xml-attribute-value">"http://xmlcalabash.com/ns/extensions"</span> <span class="code-xml-attribute-prefix">xmlns:</span><span class="code-xml-attribute-local-name">dtb</span>=<span class="code-xml-attribute-value">"http://www.daisy.org/z3986/2005/dtbook/"</span> <span class="code-xml-attribute-prefix">xmlns:</span><span class="code-xml-attribute-local-name">math</span>=<span class="code-xml-attribute-value">"http://www.w3.org/1998/Math/MathML"</span> <span class="code-xml-attribute-local-name">version</span>=<span class="code-xml-attribute-value">"1.0"</span>&gt;

  &lt;<span class="code-xml-element-prefix">p:</span><span class="code-xml-element-local-name">declare-step</span> <span class="code-xml-attribute-local-name">type</span>=<span class="code-xml-attribute-value">"px:dtbook-break-detect"</span>&gt;

    &lt;<span class="code-xml-element-prefix">p:</span><span class="code-xml-element-local-name">documentation</span>&gt;Break an input DTBook document into words and sentences by inserting word and sentence elements.&lt;/<span class="code-xml-element-prefix">p:</span><span class="code-xml-element-local-name">documentation</span>&gt;

    &lt;<span class="code-xml-element-prefix">p:</span><span class="code-xml-element-local-name">input</span> <span class="code-xml-attribute-local-name">port</span>=<span class="code-xml-attribute-value">"source"</span> <span class="code-xml-attribute-local-name">primary</span>=<span class="code-xml-attribute-value">"true"</span>/&gt;
    &lt;<span class="code-xml-element-prefix">p:</span><span class="code-xml-element-local-name">output</span> <span class="code-xml-attribute-local-name">port</span>=<span class="code-xml-attribute-value">"result"</span> <span class="code-xml-attribute-local-name">primary</span>=<span class="code-xml-attribute-value">"true"</span>/&gt;
    &lt;<span class="code-xml-element-prefix">p:</span><span class="code-xml-element-local-name">output</span> <span class="code-xml-attribute-local-name">port</span>=<span class="code-xml-attribute-value">"sentence-ids"</span>&gt;
      &lt;<span class="code-xml-element-prefix">p:</span><span class="code-xml-element-local-name">pipe</span> <span class="code-xml-attribute-local-name">port</span>=<span class="code-xml-attribute-value">"sentence-ids"</span> <span class="code-xml-attribute-local-name">step</span>=<span class="code-xml-attribute-value">"generic"</span>/&gt;
    &lt;/<span class="code-xml-element-prefix">p:</span><span class="code-xml-element-local-name">output</span>&gt;

    &lt;<span class="code-xml-element-prefix">p:</span><span class="code-xml-element-local-name">import</span> <span class="code-xml-attribute-local-name">href</span>=<span class="code-xml-attribute-value">"<a href="/pipeline/modules/nlp-common/src/main/resources/xml/library.xpl" class="source">http://www.daisy.org/pipeline/modules/nlp-common/library.xpl</a>"</span>&gt;
      &lt;<span class="code-xml-element-prefix">p:</span><span class="code-xml-element-local-name">documentation</span>&gt;
        px:break-and-reshape
      &lt;/<span class="code-xml-element-prefix">p:</span><span class="code-xml-element-local-name">documentation</span>&gt;
    &lt;/<span class="code-xml-element-prefix">p:</span><span class="code-xml-element-local-name">import</span>&gt;


    

    &lt;<span class="code-xml-element-prefix">px:</span><span class="code-xml-element-local-name">break-and-reshape</span> <span class="code-xml-attribute-local-name">name</span>=<span class="code-xml-attribute-value">"generic"</span> <span class="code-xml-attribute-local-name">inline-tags</span>=<span class="code-xml-attribute-value">"dtb:acronym|dtb:em|dtb:strong|dtb:a|dtb:abbr|dtb:dfn|dtb:linenum|dtb:pagenum|                      dtb:samp|dtb:span|dtb:sup|dtb:sub|dtb:w|dtb:noteref|dtb:br|dtb:math"</span> <span class="code-xml-attribute-local-name">ensure-word-before</span>=<span class="code-xml-attribute-value">"dtb:acronym|dtb:span|dtb:linenum|dtb:pagenum|dtb:samp|dtb:noteref|dtb:abbr|                             dtb:acronym|dtb:br|dtb:math"</span> <span class="code-xml-attribute-local-name">ensure-word-after</span>=<span class="code-xml-attribute-value">"dtb:acronym|dtb:span|dtb:linenum|dtb:pagenum|dtb:samp|dtb:noteref|dtb:abbr|                            dtb:acronym|dtb:br|dtb:math"</span> <span class="code-xml-attribute-local-name">can-contain-sentences</span>=<span class="code-xml-attribute-value">"dtb:address|dtb:author|dtb:notice|dtb:prodnote|dtb:sidebar|dtb:line|                                dtb:em|dtb:strong|dtb:dfn|dtb:kdb|dtb:code|dtb:samp|dtb:cite|dtb:abbr|                                dtb:acronym|dtb:sub|dtb:sup|dtb:span|dtb:bdo|dtb:q|dtb:p|dtb:doctitle|                                dtb:docauthor|dtb:levelhd|dtb:hd|dtb:h1|dtb:h2|dtb:h3|dtb:h4|dtb:h5|                                dtb:h6|dtb:dt|dtb:dd|dtb:li|dtb:lic|dtb:caption|dtb:th|dtb:td|                                dtb:bridgehead|dtb:byline|dtb:covertitle|dtb:epigraph|dtb:dateline|dtb:a"</span> <span class="code-xml-attribute-local-name">cannot-be-sentence-child</span>=<span class="code-xml-attribute-value">"dtb:linenum|dtb:epigraph|dtb:td|dtb:th|dtb:tr|dtb:tfoot|dtb:thead|                                   dtb:tbody|dtb:colgroup|dtb:col|dtb:list|dtb:li|dtb:lic|dtb:table|                                   dtb:bridgehead|dtb:blockquote|dtb:dl|dtb:dd|dtb:div|dtb:title|                                   dtb:author|dtb:sidebar|dtb:note|dtb:annotation|dtb:byline|dtb:dateline|                                   dtb:linegroup|dtb:poem|dtb:p|dtb:doctitle|dtb:docauthor|dtb:covertitle|                                   dtb:h1|dtb:h2|dtb:h3|dtb:h4|dtb:h5|dtb:h6|dtb:hd"</span> <span class="code-xml-attribute-local-name">special-sentences</span>=<span class="code-xml-attribute-value">"dtb:pagenum|dtb:annoref|dtb:noteref|dtb:linenum|math:math"</span> <span class="code-xml-attribute-local-name">output-ns</span>=<span class="code-xml-attribute-value">"http://www.daisy.org/z3986/2005/dtbook/"</span> <span class="code-xml-attribute-local-name">output-word-tag</span>=<span class="code-xml-attribute-value">"w"</span> <span class="code-xml-attribute-local-name">output-sentence-tag</span>=<span class="code-xml-attribute-value">"sent"</span> <span class="code-xml-attribute-local-name">output-subsentence-tag</span>=<span class="code-xml-attribute-value">"span"</span>/&gt;

    
    &lt;<span class="code-xml-element-prefix">p:</span><span class="code-xml-element-local-name">xslt</span>&gt;
      &lt;<span class="code-xml-element-prefix">p:</span><span class="code-xml-element-local-name">input</span> <span class="code-xml-attribute-local-name">port</span>=<span class="code-xml-attribute-value">"stylesheet"</span>&gt;
    	&lt;<span class="code-xml-element-prefix">p:</span><span class="code-xml-element-local-name">document</span> <span class="code-xml-attribute-local-name">href</span>=<span class="code-xml-attribute-value">"<a href="/pipeline/modules/dtbook-break-detection/src/main/resources/xml/add-ids.xsl" class="source">add-ids.xsl</a>"</span>/&gt;
      &lt;/<span class="code-xml-element-prefix">p:</span><span class="code-xml-element-local-name">input</span>&gt;
      &lt;<span class="code-xml-element-prefix">p:</span><span class="code-xml-element-local-name">input</span> <span class="code-xml-attribute-local-name">port</span>=<span class="code-xml-attribute-value">"parameters"</span>&gt;
    	&lt;<span class="code-xml-element-prefix">p:</span><span class="code-xml-element-local-name">empty</span>/&gt;
      &lt;/<span class="code-xml-element-prefix">p:</span><span class="code-xml-element-local-name">input</span>&gt;
    &lt;/<span class="code-xml-element-prefix">p:</span><span class="code-xml-element-local-name">xslt</span>&gt;

  &lt;/<span class="code-xml-element-prefix">p:</span><span class="code-xml-element-local-name">declare-step</span>&gt;

  &lt;<span class="code-xml-element-prefix">p:</span><span class="code-xml-element-local-name">declare-step</span> <span class="code-xml-attribute-local-name">type</span>=<span class="code-xml-attribute-value">"px:dtbook-unwrap-words"</span>&gt;
    &lt;<span class="code-xml-element-prefix">p:</span><span class="code-xml-element-local-name">documentation</span>&gt;Remove the word markups from the input document.&lt;/<span class="code-xml-element-prefix">p:</span><span class="code-xml-element-local-name">documentation</span>&gt;
    &lt;<span class="code-xml-element-prefix">p:</span><span class="code-xml-element-local-name">input</span> <span class="code-xml-attribute-local-name">port</span>=<span class="code-xml-attribute-value">"source"</span> <span class="code-xml-attribute-local-name">primary</span>=<span class="code-xml-attribute-value">"true"</span>/&gt;
    &lt;<span class="code-xml-element-prefix">p:</span><span class="code-xml-element-local-name">output</span> <span class="code-xml-attribute-local-name">port</span>=<span class="code-xml-attribute-value">"result"</span> <span class="code-xml-attribute-local-name">primary</span>=<span class="code-xml-attribute-value">"true"</span>/&gt;
    &lt;<span class="code-xml-element-prefix">p:</span><span class="code-xml-element-local-name">unwrap</span> <span class="code-xml-attribute-local-name">match</span>=<span class="code-xml-attribute-value">"dtb:w[not(@*)]"</span>/&gt;
  &lt;/<span class="code-xml-element-prefix">p:</span><span class="code-xml-element-local-name">declare-step</span>&gt;

&lt;/<span class="code-xml-element-prefix">p:</span><span class="code-xml-element-local-name">library</span>&gt;</div></body>
</html>
