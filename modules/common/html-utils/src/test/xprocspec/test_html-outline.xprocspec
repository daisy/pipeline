<?xml version="1.0" encoding="UTF-8"?>
<x:description xmlns:x="http://www.daisy.org/ns/xprocspec"
               xmlns:px="http://www.daisy.org/ns/pipeline/xproc"
               script="../../main/resources/xml/xproc/html-outline.xpl">
	
	<x:scenario label="simple outline generation with empty title test">
		<x:call step="px:html-outline">
			<x:input port="source">
				<x:document type="inline">
					<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr">
						<head><meta charset="UTF-8" /><title></title></head>
						<body xmlns:epub="http://www.idpf.org/2007/ops" id="d862273e7-0" epub:type="frontmatter">
							<section id="d861827e19">
								<h1 id="d862273e9-0" epub:type="title"><span class="ftit"></span></h1>
								<p><span class="auteur"><span class="pc">LOREM IPSUM</span> <span class="pc">LOREM IPSUM</span></span></p>
						        <aside id="d862273e18-0" epub:type="annotation">Lorem ipsum dolor sit amet</aside>
						    </section>
						    <section id="d861827e29"><p>Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit.</p>
						        <aside id="d862273e51-0" epub:type="annotation">Lorem ipsum</aside>
						    </section>
						    <section id="d861827e87">
						    	<h1 id="d862273e78-0"><em>Table des matières</em></h1>
						    	<p>Lorem ipsum dolor sit amet</p>
						    </section>
						    </body>
						</html>
				</x:document>
			</x:input>
		</x:call>
		<x:context label="result-context">
			<x:document type="port" port="result"/>
		</x:context>
		<x:expect label="result" type="compare">
			<x:document type="inline">
				<ol xmlns="http://www.w3.org/1999/xhtml">
				   <li data-generated="true">
				      <a href="#d862273e7-0">Untitled document</a>
				      <ol>
				         <li data-generated="true">
				            <a href="#d861827e19">Untitled section</a>
				            <ol>
				               <li data-generated="true">
				                  <a href="#d862273e18-0">Sidebar</a>
				               </li>
				            </ol>
				         </li>
				         <li data-generated="true">
				            <a href="#d861827e29">Untitled section</a>
				            <ol>
				               <li data-generated="true">
				                  <a href="#d862273e51-0">Sidebar</a>
				               </li>
				            </ol>
				         </li>
				         <li>
				            <a href="#d861827e87">
				               <em xmlns:epub="http://www.idpf.org/2007/ops">Table des matières</em>
				            </a>
				         </li>
				      </ol>
				   </li>
				</ol>
			</x:document>
		</x:expect>
	</x:scenario>

	<x:scenario label="Outline with file reference anchor">
		<x:call step="px:html-outline">
			<x:option name="file-uri" select="'foo.xhtml'"/>
			<x:input port="source">
				<x:document type="inline">
					<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr">
						<head><meta charset="UTF-8" /><title></title></head>
						<body xmlns:epub="http://www.idpf.org/2007/ops" id="d862273e7-0" epub:type="frontmatter">
							<section id="d861827e19">
								<h1 id="d862273e9-0" epub:type="title"><span class="ftit"></span></h1>
								<p><span class="auteur"><span class="pc">LOREM IPSUM</span> <span class="pc">LOREM IPSUM</span></span></p>
						        <aside id="d862273e18-0" epub:type="annotation">Lorem ipsum dolor sit amet</aside>
						    </section>
						    <section id="d861827e29"><p>Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit.</p>
						        <aside id="d862273e51-0" epub:type="annotation">Lorem ipsum</aside>
						    </section>
						    <section id="d861827e87">
						    	<h1 id="d862273e78-0"><em>Table des matières</em></h1>
						    	<p>Lorem ipsum dolor sit amet</p>
						    </section>
						    </body>
						</html>
				</x:document>
			</x:input>
		</x:call>
		<x:context label="result-context">
			<x:document type="port" port="result"/>
		</x:context>
		<x:expect label="result" type="compare">
			<x:document type="inline">
				<ol xmlns="http://www.w3.org/1999/xhtml">
				   <li data-generated="true">
				      <a href="foo.xhtml#d862273e7-0">Untitled document</a>
				      <ol>
				         <li data-generated="true">
				            <a href="foo.xhtml#d861827e19">Untitled section</a>
				            <ol>
				               <li data-generated="true">
				                  <a href="foo.xhtml#d862273e18-0">Sidebar</a>
				               </li>
				            </ol>
				         </li>
				         <li data-generated="true">
				            <a href="foo.xhtml#d861827e29">Untitled section</a>
				            <ol>
				               <li data-generated="true">
				                  <a href="foo.xhtml#d862273e51-0">Sidebar</a>
				               </li>
				            </ol>
				         </li>
				         <li>
				            <a href="foo.xhtml#d861827e87">
				               <em xmlns:epub="http://www.idpf.org/2007/ops">Table des matières</em>
				            </a>
				         </li>
				      </ol>
				   </li>
				</ol>
			</x:document>
		</x:expect>
	</x:scenario>
	
</x:description>
